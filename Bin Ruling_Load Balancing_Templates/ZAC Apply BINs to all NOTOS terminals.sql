-- 1 = Piraeus , NET_ABC
-- 6 = ETHNIKI, NET_NTBN
-- 202 = ALPHABANK, NET_CLBICALPHA
-- 205 = EUROBANK, NET_CLBICEBNK

declare @tid varchar(16)
declare @name varchar(20)

declare merch_cursor cursor for
select  TID, uploadhostname from MERCHANTS a, uploadhosts b
where mid in('000000078000000','000000110000201','000000110000202','000000110000203','000000110000205','000000110000206','000000110000207','000000110000208','000000110000210','000000110000212','000000110000213','000000110000216','000000110000217','000000110000219','000000110000220','000000110000221','000000110000224','000000110000226','000000110000229','000000110000230','000000110000233','000000110000234','000000110000235','000000110000236','000000110000237','000000110000238','000000110000239','000000110000240','000000110000241','000000110000242','000000110000243','000000110000270','000000110000271','000000110000274','000000110000275','000000110000278','000000110000279','000000110000285','000000110000286','000000110000288','000000110000289','000000110000291','000000110000292','000000110000295','000000110000296','000000110000297','000000110000298','000000110000299','000000110000300')

and a.uploadhostid = '201'
and a.uploadhostid = b.uploadhostid

open merch_cursor
if @@ERROR > 0
  return

fetch next from merch_cursor
into @tid, @name

while @@FETCH_STATUS = 0
begin
 -- delete from MERCHBINS where TID = @tid and destport = 'NET_CLBICEBNK'
  --and len(binlower) > 3 and destport <> 'NET_CITI'


--7.1 ---Basic Insert - Change from CUP so to run --
    -- Example for CUP. ALLOWED MUST BE USED. Applies to NET_ABC = 'Y', all others 'N'. Instead of DESTPORT --> NET_XXXXXX must be used
  insert into MERCHBINS
  (TID, DESTPORT, BINLOWER, BINUPPER, INSTMIN, INSTMAX, GRACEMIN, GRACEMAX, ALLOWED, AMOUNTMIN, AMOUNTMAX)
  (
  select @TID,
  --DESTPORT,
  'NET_ALPMOR',
  BINLOWER, BINUPPER,
  --INSTMIN,
  --2
  0,
  --INSTMAX,
  1,
  GRACEMIN, GRACEMAX,
  --ALLOWED, ---- Used only for CUP
  'N',
  AMOUNTMIN, AMOUNTMAX from MERCHBINS
  --where TID = '1111    ' and DESTPORT = 'NET_CLBICEBNK'
  where tid = '2222    ' and destport = 'NET_CUP'   ----Used only for CUP

  )

  fetch next from merch_cursor
  into @tid, @name
end

CLOSE merch_cursor
deallocate merch_cursor
