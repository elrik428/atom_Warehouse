-- Check CUP functionality

select a.[APPNM],clusterid,COUNT(*) from vc30.RELATION a join [vc30].[TERM_DLD_FILES] b on a.TERMID=b.[TERMID] and a.[APPNM]=b.[APPNM]
where SERFILENM like '%CUP%' group by a.[APPNM],clusterid order by a.[APPNM],clusterid


select *
--distinct SERFILENM
--CLUSTERID, a.TERMID
from TERM_DLD_FILES a
join RELATION b on a.TERMID=b.[TERMID] and a.[APPNM]=b.[APPNM]
where
SERFILENM   like  '%CUP%' and
b.clusterid  in ('EPOS_PIRAEUS','EPOS_DUTYFREE','EPOS_ELL.DIANOMES','EPOS_NOTOS','EPOS_MOTHERCARE','EPOS_ATTICA','EPOS_INTERSPORT','EPOS_TRADESTATUS') and SERFILENM like'%P.ZIP%' and substring(a.TERMID,1,4) = '7300'
order by CLUSTERID

-- Update CUP
update TERM_DLD_FILES
set SERFILENM = 'ParamFiles\_CUP_NoNCVM_AllCVMs\P.zip'
where TERMID in
('73006908','53535353','73007422','73000254','73006912','B00033333','73000266','73002647','73002652','73002653','73002546','73002547','73002548','73002649','73002651','73007895','73007631','73000846','73000849','73002689','73002682','73000848','73007745','73003004','73003011','73003014','73003020','73003021','73003022','73003032','73005420','73005947','73006154','73007302','73007859','73003012','520TRADE','73003003','73003005','73003007','73003008','73003009','73003010','73003013','73003015','73003023','73003024','73003025','73003026','73003027','73003033','73003034','73003035','73003036','73005421','73005436','73005437','73007301')
--and SERFILENM  like  '%CUP%'
and SERFILENM like'%P.ZIP%'
