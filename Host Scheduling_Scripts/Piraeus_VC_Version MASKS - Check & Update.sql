select distinct CLUSTERID,termid, appnm, famnm   from vc30.relation where
--termid like 'COMBO%'
(TERMID like '675%' or termid like '520G%' or termid like 'COMBO%' or termid like '520INSTA%')
AND substring(appnm,1,4) = ('PIRA')
 and substring(appnm,9,1) = ('P')
AND acccnt = -1
--and appnm  in ('EPOS01C6P')
--and appnm   in ('EPOS0201P')
--and appnm = 'EOS011103' and
--and appnm = 'EOS010802'
--and famnm = 'Vx-675'
order by famnm,appnm



select famnm,appnm,count(*) from vc30.relation where
--
--substring(appnm,1,4) = ('EPOS') and substring(appnm,9,1) = 'P' and
--famnm = 'Vx-520' and
--famnm = 'Vx-675' and
TERMID in
('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')
--('520VERO','520VEROREC','675VERO','73001412','73001425','73001428','73001534','73001557','73001578','73001597','73001602','73001622','73001646','73001688','73001720','73001768','73001788','73001789','73001790','73001791','73001792','73001793','73006235','73006236','73006237','73006239','73006240','73006241','73006242','73006243','73006244','73001582','73001829','73006234','73006238')
group by famnm,appnm
ORDER BY famnm,appnm



declare @FromModel varchar(20)
declare @ToModel varchar(20)
declare @FromAppnm varchar(10)
declare @ToAppnm varchar(10)
declare @FromAppnm1 varchar(10)
declare @ToAppnm1 varchar(10)

-- 2. Modify the 4 variables below accordingly
--

--SET @FromModel='Vx-520'
--SET @ToModel='Vx-520'
 SET @FromModel='Vx-675'
 SET @ToModel='Vx-675'
-- SET @FromModel='Vx-675WiFi'
-- SET @ToModel='Vx-675WiFi'
SET @FromAppnm='PIRA0204P'
SET @ToAppnm='PIRA0205P'
SET @FromAppnm1='PIRA0204'
SET @ToAppnm1='PIRA0205'


-- 1 Create new app on all TIDs in the target model based on the TIDs found in the source model and app name combination.

insert into vc30.RELATION
(FAMNM,APPNM,TERMID,CLUSTERID,ACCCNT,LASTFULL,LASTPAR,ACCCODE,VIOLATIONCOUNT,LOCKED,MODON,MODBY,LOCKTIMESTAMP,EPROMID,DESCRIPTION,DLD_STATUS,
ISAUTODOWNLOAD,LAST_ATTEMPTED_DLD_DATE,VERSION,LASTPARAM_DLD_DATE,LASTFILE_DLD_DATE,FORUSES,FORMVIEWTYPE,SERVERID,TERM_FILE_UPDATES,
FORCEFILEDLD,FORCEPARAMDLD,FORCETERMFILEDLD)
select @ToModel,@ToAppnm,TERMID,CLUSTERID,ACCCNT,NULL,NULL,ACCCODE,0,LOCKED,getdate(),
'SCRIPT1',NULL,NULL,DESCRIPTION,NULL,'N',NULL,NULL,NULL,NULL,FORUSES,FORMVIEWTYPE,NULL,TERM_FILE_UPDATES,'D','D','D'
from vc30.relation
where famnm = @FromModel and appnm = @FromAppnm
-- for specific terminal
and TERMID in

('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

-- 2 Create new parameters app on all TIDs in the target model based on the TIDs found in the source model and app name combination.
insert into vc30.RELATION
(FAMNM,APPNM,TERMID,CLUSTERID,ACCCNT,LASTFULL,LASTPAR,ACCCODE,VIOLATIONCOUNT,LOCKED,MODON,MODBY,LOCKTIMESTAMP,EPROMID,DESCRIPTION,DLD_STATUS,
ISAUTODOWNLOAD,LAST_ATTEMPTED_DLD_DATE,VERSION,LASTPARAM_DLD_DATE,LASTFILE_DLD_DATE,FORUSES,FORMVIEWTYPE,SERVERID,TERM_FILE_UPDATES,
FORCEFILEDLD,FORCEPARAMDLD,FORCETERMFILEDLD)
select @ToModel,@ToAppnm1,TERMID,CLUSTERID,ACCCNT,NULL,NULL,ACCCODE,0,LOCKED,getdate(),
'SCRIPT1',NULL,NULL,DESCRIPTION,NULL,'N',NULL,NULL,NULL,NULL,FORUSES,FORMVIEWTYPE,NULL,TERM_FILE_UPDATES,'D','D','D'
from vc30.relation
where famnm = @FromModel and appnm = @FromAppnm1
-- for specific terminal
and TERMID in

('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

-- 3 Copy parameters from source app to target app
insert into vc30.PARAMETER (FAMNM, APPNM, PARTID, PARNAMELOC, SEQINFO, DLDTYPE,PARINFO, VALUE,PSIZE,FLAG)
select @ToModel model,@ToAppnm, PARTID, PARNAMELOC, SEQINFO, DLDTYPE,PARINFO, VALUE,PSIZE,FLAG
from vc30.parameter
where famnm = @FromModel and appnm in (@FromAppnm, @FromAppnm1)
-- for specific terminal
and PARTID in

('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

-- Copy Parameters from one app to another app
-- 1 *NOTE: Ensure that the new app is created first in the target Model using Model/App Manager


-- 4  update the file paths

update vc30.term_dld_files
set appnm = @ToAppnm
where famnm = @FromModel and appnm = @FromAppnm
AND termid in

('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

--------------------------------------------------
-- 5  Delete old parameters
delete from vc30.RELATION
where famnm = @FromModel and appnm = @FromAppnm
-- for specific terminal
and TERMID in

('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

-- 6 Delete old parameters
delete from vc30.RELATION
where famnm = @FromModel and appnm = @FromAppnm1
-- for specific terminal
and TERMID in
('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

 -- 7 Update USES
update vc30.PARAMETER set value = 'TPIRA0205P' where parnameloc = 'USES' and partid in
('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')

-- Update LOGO parm
update vc30.PARAMETER
set [value] = 'F:KATASTASHA_D.VFT'
where PARNAMELOC = 'LOGO_DISP_EN' and PARTID in
('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')


GO



------- UNZIP
--select value,count(*) from vc30.PARAMETER where parnameloc = '*unzip' and partid in
--('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')
--group by value

---- USES
--select value,count(*) from vc30.PARAMETER where parnameloc = 'USES' and partid in
--('COMBOSUPER','COMBOSALES','COMBOINST','COMBOTRAVEL','COMBOSERV','COMBORES','COMBOCTLSTRAVEL','COMBOHOTEL','520GCTLSCAR','520GCTLSHOTEL','520GCTLSTRAVEL','520GSALES','COMBOCAR','COMBOCASH','COMBOCTLSSUPER','COMBOCTLSCAR','COMBOCTLSHOTEL','COMBOCTLSINST','COMBOCTLSRES','COMBOCTLSSALES','520INSTANT','520GCAR','520GCTLSRES','520GCTLSINST','520GCTLSSALES','520GCTLSSUPER','520GTRAVEL','520GSUPER','520GSERV','520GINST','520GHOTEL','520GRES','675TRAVEL','675CAR','675CTLSCAR-CO','675CTLSCAR','675CTLSHOT','675RES','675TESTCTLSP','675INSTANT','675CTLSSAL-CO','675CTLSRES','675CTLSINS','675CTLSHOT-CO','675CTLSINS-CO','675CTLSTRA-CO','675CTLSSUP-CO','675SUPER','675CTLSRES-CO','675CTLSSAL','675CTLSTRA','675CTLSSUP','675SALES','675HOTEL','675INST','675INSTANTWF','675WIFIINS','675WIFIRES','675WITEST','675WIFITRA','675WIFISUP','675WIFIHOT','675WIFICAR','675WIFISAL')
--group by value
